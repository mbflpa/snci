<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Resumo Geral - SNCI</title>

    <!-- Bootstrap 4 -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/4.6.2/css/bootstrap.min.css"
    />
    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />

    <style>
      /* =====================================
           VARIÁVEIS CSS - CORES SNCI/CORREIOS
        ===================================== */
      :root {
        --azul_correios: #00416b;
        --azul_claro_correios: #0083ca;
        --amarelo_correios: #ffd400;
        --amarelo_escuro_correios: #cd992b;
        --amarelo_prisma_claro_correios: #ffe600;
        --amarelo_prisma_escuro_correios: #ffc20e;
        --cinza_warm_gray_claro_correios: #d1ccc7;
        --cinza_warm_gray_escuro_correios: #bdb4ab;
        --preto_slogan_pantone_black_correios: #323335;
      }

      @import url("https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap");

      /* =====================================
           CONTAINER PRINCIPAL - SCOPED
        ===================================== */
      .snci-resumo-geral {
        font-family: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI",
          Roboto, sans-serif;
        margin: 0;
        position: relative;
        background: transparent;
      }

      /* Container com vidro fosco branco */
      .snci-resumo-geral .resumo-container {
        background: rgba(255, 255, 255, 0.8);
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        border-radius: 16px;
        padding: 24px;
        position: relative;
        overflow: hidden;
        border: 1px solid rgba(255, 255, 255, 0.9);
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1),
          0 4px 16px rgba(0, 0, 0, 0.05), inset 0 1px 0 rgba(255, 255, 255, 0.9);
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      }

      /* Efeito de borda sutil */
      .snci-resumo-geral .resumo-container::before {
        content: "";
        position: absolute;
        top: -1px;
        left: -1px;
        right: -1px;
        bottom: -1px;
        background: linear-gradient(
          45deg,
          var(--azul_correios),
          var(--azul_claro_correios),
          var(--amarelo_correios),
          var(--amarelo_prisma_escuro_correios),
          var(--azul_correios)
        );
        background-size: 400% 400%;
        border-radius: 17px;
        z-index: -1;
        animation: gradient-border 6s ease infinite;
        opacity: 0.3;
      }

      @keyframes gradient-border {
        0%,
        100% {
          background-position: 0% 50%;
        }
        50% {
          background-position: 100% 50%;
        }
      }

      /* Efeito de partículas suaves */
      .snci-resumo-geral .resumo-container::after {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: radial-gradient(
            circle at 20% 80%,
            rgba(0, 65, 107, 0.05) 0%,
            transparent 50%
          ),
          radial-gradient(
            circle at 80% 20%,
            rgba(0, 131, 202, 0.03) 0%,
            transparent 50%
          ),
          radial-gradient(
            circle at 40% 40%,
            rgba(255, 212, 0, 0.02) 0%,
            transparent 50%
          );
        pointer-events: none;
        z-index: 1;
      }

      /* =====================================
           TÍTULO DO COMPONENTE - SCOPED
        ===================================== */
      .snci-resumo-geral .resumo-title {
        font-size: 1.4rem;
        font-weight: 700;
        color: var(--azul_correios);
        text-align: center;
        margin-bottom: 24px;
        position: relative;
        z-index: 2;
        letter-spacing: -0.025em;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 12px;
      }

      .snci-resumo-geral .resumo-title::before {
        content: "";
        flex: 1;
        height: 1px;
        background: linear-gradient(
          to right,
          transparent,
          rgba(0, 65, 107, 0.3),
          transparent
        );
      }

      .snci-resumo-geral .resumo-title::after {
        content: "";
        flex: 1;
        height: 1px;
        background: linear-gradient(
          to left,
          transparent,
          rgba(0, 65, 107, 0.3),
          transparent
        );
      }

      /* =====================================
           GRID DE KPIs - SCOPED
        ===================================== */
      .snci-resumo-geral .kpi-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 12px;
        position: relative;
        z-index: 2;
      }

      /* =====================================
           CARDS KPI INDIVIDUAL - SCOPED
        ===================================== */
      .snci-resumo-geral .kpi-card {
        background: rgba(255, 255, 255, 0.9);
        backdrop-filter: blur(12px);
        -webkit-backdrop-filter: blur(12px);
        border: 1px solid rgba(255, 255, 255, 0.95);
        border-radius: 12px;
        padding: 16px;
        display: flex;
        align-items: center;
        gap: 12px;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
        overflow: hidden;
        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08),
          inset 0 1px 0 rgba(255, 255, 255, 0.95);
        cursor: pointer;
      }

      /* Efeito hover nos cards */
      .snci-resumo-geral .kpi-card:hover {
        transform: translateY(-4px) scale(1.02);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.12),
          inset 0 1px 0 rgba(255, 255, 255, 0.95);
        border-color: rgba(255, 255, 255, 0.95);
        background: rgba(255, 255, 255, 0.95);
      }

      /* Borda lateral colorida baseada no tipo */
      .snci-resumo-geral .kpi-card::before {
        content: "";
        position: absolute;
        left: 0;
        top: 0;
        bottom: 0;
        width: 3px;
        background: var(--accent-color, var(--amarelo_correios));
        border-radius: 0 2px 2px 0;
        transition: width 0.3s ease;
      }

      .snci-resumo-geral .kpi-card:hover::before {
        width: 6px;
      }

      /* Variações de cores por tipo de KPI */
      .snci-resumo-geral .kpi-card.increase {
        --accent-color: #ef4444;
      }

      .snci-resumo-geral .kpi-card.decrease {
        --accent-color: #10b981;
      }

      .snci-resumo-geral .kpi-card.neutral {
        --accent-color: var(--amarelo_correios);
      }

      /* =====================================
           ÍCONES DOS KPIs - SCOPED
        ===================================== */
      .snci-resumo-geral .kpi-icon {
        font-size: 1.8rem;
        width: 50px;
        height: 50px;
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: var(--icon-bg, rgba(255, 212, 0, 0.2));
        color: var(--icon-color, var(--amarelo_escuro_correios));
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        flex-shrink: 0;
        border: 1px solid rgba(0, 65, 107, 0.1);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08),
          inset 0 1px 0 rgba(255, 255, 255, 0.9);
      }

      .snci-resumo-geral .kpi-icon::before {
        content: "";
        position: absolute;
        inset: 0;
        border-radius: 10px;
        background: linear-gradient(
          135deg,
          rgba(255, 255, 255, 0.3),
          transparent
        );
        pointer-events: none;
      }

      /* Cores dos ícones por tipo */
      .snci-resumo-geral .kpi-card.increase .kpi-icon {
        --icon-bg: rgba(239, 68, 68, 0.2);
        --icon-color: #ef4444;
      }

      .snci-resumo-geral .kpi-card.decrease .kpi-icon {
        --icon-bg: rgba(16, 185, 129, 0.2);
        --icon-color: #10b981;
      }

      .snci-resumo-geral .kpi-card:hover .kpi-icon {
        transform: scale(1.1) rotate(5deg);
        box-shadow: 0 6px 16px rgba(0, 0, 0, 0.12),
          inset 0 1px 0 rgba(255, 255, 255, 0.95);
      }

      /* =====================================
           CONTEÚDO DOS KPIs - SCOPED
        ===================================== */
      .snci-resumo-geral .kpi-content {
        flex: 1;
        min-width: 0;
      }

      .snci-resumo-geral .kpi-title {
        font-size: 0.7rem;
        color: var(--preto_slogan_pantone_black_correios);
        font-weight: 600;
        margin-bottom: 4px;
        line-height: 1.3;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        opacity: 0.8;
      }

      .snci-resumo-geral .kpi-value {
        font-size: 1.4rem;
        font-weight: 700;
        color: var(--azul_correios);
        line-height: 1.2;
        transition: all 0.3s ease;
        letter-spacing: -0.025em;
      }

      .snci-resumo-geral .kpi-card:hover .kpi-value {
        transform: scale(1.05);
        color: var(--azul_correios);
      }

      /* =====================================
           ANIMAÇÕES E TRANSIÇÕES - SCOPED
        ===================================== */
      .snci-resumo-geral .fade-in-up {
        opacity: 0;
        transform: translateY(20px) scale(0.95);
        transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .snci-resumo-geral .fade-in-up.animate {
        opacity: 1;
        transform: translateY(0) scale(1);
      }

      .snci-resumo-geral .loading-pulse {
        animation: pulse-glow 2s ease-in-out infinite;
      }

      @keyframes pulse-glow {
        0%,
        100% {
          opacity: 0.8;
          transform: scale(1);
        }
        50% {
          opacity: 1;
          transform: scale(1.02);
        }
      }

      /* Partículas flutuantes - SCOPED */
      .snci-resumo-geral .floating-particles {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        overflow: hidden;
        z-index: 1;
      }

      .snci-resumo-geral .particle {
        position: absolute;
        width: 2px;
        height: 2px;
        background: rgba(0, 65, 107, 0.2);
        border-radius: 50%;
        animation: float 15s infinite linear;
      }

      @keyframes float {
        0% {
          transform: translateY(100%) translateX(0px) rotate(0deg);
          opacity: 0;
        }
        10% {
          opacity: 1;
        }
        90% {
          opacity: 1;
        }
        100% {
          transform: translateY(-100px) translateX(50px) rotate(360deg);
          opacity: 0;
        }
      }

      /* =====================================
           RESPONSIVIDADE - SCOPED
        ===================================== */
      @media (max-width: 992px) {
        .snci-resumo-geral .kpi-grid {
          grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
          gap: 10px;
        }

        .snci-resumo-geral .kpi-card {
          padding: 14px;
          gap: 10px;
        }

        .snci-resumo-geral .kpi-icon {
          width: 45px;
          height: 45px;
          font-size: 1.6rem;
        }

        .snci-resumo-geral .kpi-value {
          font-size: 1.3rem;
        }
      }

      @media (max-width: 768px) {
        .snci-resumo-geral .resumo-container {
          padding: 20px 16px;
          margin: 0;
          border-radius: 12px;
        }

        .snci-resumo-geral .kpi-grid {
          grid-template-columns: 1fr;
          gap: 8px;
        }

        .snci-resumo-geral .kpi-card {
          padding: 12px;
          gap: 10px;
        }

        .snci-resumo-geral .resumo-title {
          font-size: 1.2rem;
          margin-bottom: 20px;
        }

        .snci-resumo-geral .kpi-title {
          font-size: 0.65rem;
        }

        .snci-resumo-geral .kpi-value {
          font-size: 1.2rem;
        }

        .snci-resumo-geral .kpi-icon {
          width: 40px;
          height: 40px;
          font-size: 1.4rem;
        }
      }

      @media (max-width: 480px) {
        .snci-resumo-geral .resumo-container {
          padding: 16px 12px;
        }

        .snci-resumo-geral .kpi-card {
          padding: 10px;
          gap: 8px;
          border-radius: 10px;
        }

        .snci-resumo-geral .kpi-icon {
          width: 35px;
          height: 35px;
          font-size: 1.2rem;
          border-radius: 8px;
        }

        .snci-resumo-geral .kpi-title {
          font-size: 0.6rem;
          margin-bottom: 2px;
        }

        .snci-resumo-geral .kpi-value {
          font-size: 1.1rem;
        }
      }

      /* =====================================
           ESTADOS DE LOADING - SCOPED
        ===================================== */
      .snci-resumo-geral .kpi-value.loading {
        color: rgba(0, 65, 107, 0.6);
      }

      .snci-resumo-geral .status-indicator {
        position: absolute;
        top: 8px;
        right: 8px;
        width: 6px;
        height: 6px;
        border-radius: 50%;
        background: var(--amarelo_correios);
        animation: blink 2s infinite;
      }

      @keyframes blink {
        0%,
        50% {
          opacity: 1;
        }
        51%,
        100% {
          opacity: 0.3;
        }
      }
    </style>
  </head>
  <body style="background: transparent; padding: 0; margin: 0">
    <div class="snci-resumo-geral">
      <div class="resumo-container">
        <!-- Indicador de partículas flutuantes -->
        <div class="floating-particles"></div>

        <!-- Título do componente -->
        <h2 class="resumo-title" id="tituloResumo">
          <i
            class="fas fa-chart-pie"
            style="color: var(--amarelo_correios); font-size: 1.2rem"
          ></i>
          Resumo Geral de 2025
        </h2>

        <!-- Grid de KPIs -->
        <div class="kpi-grid" id="kpiGrid">
          <!-- Cards serão inseridos aqui via JavaScript -->
        </div>
      </div>
    </div>

    <!-- jQuery e Bootstrap JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/4.6.2/js/bootstrap.bundle.min.js"></script>

    <script>
      $(document).ready(function () {
        // =====================================
        // CONFIGURAÇÕES DO COMPONENTE
        // =====================================
        const config = {
          tituloResumo: "Resumo Geral de 2025",
          showAnimation: true,
          dados: {
            testesEnvolvidos: {
              valor: 85,
              icone: "fas fa-list-ul",
              titulo: "Testes Envolvidos",
              tipo: "neutral", // neutral, increase, decrease
              ordem: 1,
            },
            testesAplicados: {
              valor: 342,
              icone: "fas fa-tasks",
              titulo: "Testes Aplicados",
              tipo: "neutral",
              ordem: 2,
            },
            conformes: {
              valor: 287,
              icone: "fas fa-check-circle",
              titulo: "Conformes",
              tipo: "decrease", // Verde (bom)
              ordem: 3,
            },
            deficienciasControle: {
              valor: 55,
              icone: "fas fa-exclamation-triangle",
              titulo: "Deficiência do Controle",
              tipo: "increase", // Vermelho (ruim)
              ordem: 4,
            },
            totalEventos: {
              valor: 1250,
              icone: "fas fa-chart-bar",
              titulo: "Total de Eventos",
              tipo: "neutral",
              ordem: 5,
            },
            reincidencia: {
              valor: 12,
              icone: "fas fa-redo",
              titulo: "Reincidência",
              tipo: "increase", // Vermelho (ruim)
              ordem: 6,
            },
            valorEnvolvido: {
              valor: 2547890,
              icone: "fas fa-dollar-sign",
              titulo: "Valor Envolvido",
              tipo: "neutral",
              formatacao: "moeda",
              ordem: 7,
            },
          },
        };

        // =====================================
        // FUNÇÕES DE CRIAÇÃO DE ELEMENTOS
        // =====================================

        /**
         * Cria partículas flutuantes para efeito visual
         */
        function createFloatingParticles() {
          const particlesContainer = $(".floating-particles");
          const particleCount = 12; // Reduzido para melhor performance

          for (let i = 0; i < particleCount; i++) {
            const particle = $('<div class="particle"></div>');
            particle.css({
              left: Math.random() * 100 + "%",
              animationDelay: Math.random() * 15 + "s",
              animationDuration: 12 + Math.random() * 8 + "s",
            });
            particlesContainer.append(particle);
          }
        }

        /**
         * Inicializa todo o componente
         */
        function initResumoGeral() {
          // Definir título
          $("#tituloResumo").text(config.tituloResumo);

          // Criar partículas de fundo
          createFloatingParticles();

          // Ordenar dados por ordem configurada
          const dadosOrdenados = [];
          $.each(config.dados, function (chave, item) {
            item.chave = chave;
            dadosOrdenados.push(item);
          });

          dadosOrdenados.sort(function (a, b) {
            return a.ordem - b.ordem;
          });

          // Gerar HTML dos cards KPI
          let cardsHtml = "";
          $.each(dadosOrdenados, function (index, item) {
            const tipoClass = item.tipo || "neutral";
            const fadeClass = config.showAnimation ? "fade-in-up" : "";
            const delay = item.ordem * 100; // Delay progressivo para animação

            cardsHtml += `
                        <div class="kpi-card ${tipoClass} ${fadeClass}" data-delay="${delay}" data-chave="${
              item.chave
            }">
                            <div class="status-indicator"></div>
                            <div class="kpi-icon">
                                <i class="${item.icone}"></i>
                            </div>
                            <div class="kpi-content">
                                <div class="kpi-title">${item.titulo}</div>
                                <div class="kpi-value loading loading-pulse" data-target="${
                                  item.valor
                                }" data-formatacao="${item.formatacao || ""}">
                                    0
                                </div>
                            </div>
                        </div>
                    `;
          });

          $("#kpiGrid").html(cardsHtml);

          // Iniciar animações após inserção do HTML
          startAnimations();
        }

        // =====================================
        // FUNÇÕES DE ANIMAÇÃO
        // =====================================

        /**
         * Inicia todas as animações do componente
         */
        function startAnimations() {
          if (config.showAnimation) {
            // Animar entrada dos cards com delay progressivo
            $(".fade-in-up").each(function (index) {
              const $card = $(this);
              const delay = $card.data("delay") || index * 100;

              setTimeout(function () {
                $card.addClass("animate");
              }, delay);
            });

            // Iniciar animação dos números após cards aparecerem
            setTimeout(function () {
              animateNumbers();
            }, 800);
          } else {
            $(".fade-in-up").addClass("animate");
            animateNumbers();
          }
        }

        /**
         * Anima os números dos KPIs com efeito de contagem
         */
        function animateNumbers() {
          $(".kpi-value[data-target]").each(function () {
            const $element = $(this);
            const target = parseInt($element.data("target"));
            const formatacao = $element.data("formatacao");

            if (target && !$element.hasClass("animated")) {
              $element.addClass("animated");

              // Animação de contagem numérica
              $({ countNum: 0 }).animate(
                {
                  countNum: target,
                },
                {
                  duration: 2000,
                  easing: "easeOutCubic",
                  step: function () {
                    const current = Math.floor(this.countNum);
                    $element.text(formatValue(current, formatacao));
                  },
                  complete: function () {
                    $element.text(formatValue(this.countNum, formatacao));
                    $element.removeClass("loading loading-pulse");
                  },
                }
              );
            }
          });
        }

        // =====================================
        // FUNÇÕES UTILITÁRIAS
        // =====================================

        /**
         * Formata valores conforme tipo especificado
         * @param {number} valor - Valor a ser formatado
         * @param {string} formatacao - Tipo de formatação (moeda, percentual, etc.)
         * @returns {string} Valor formatado
         */
        function formatValue(valor, formatacao) {
          switch (formatacao) {
            case "moeda":
              return "R$ " + valor.toLocaleString("pt-BR");
            case "percentual":
              return valor.toLocaleString("pt-BR") + "%";
            default:
              return valor.toLocaleString("pt-BR");
          }
        }

        /**
         * Verifica se elemento está visível na tela
         * @param {Element} el - Elemento a ser verificado
         * @returns {boolean} True se visível
         */
        function isElementInViewport(el) {
          const rect = el.getBoundingClientRect();
          return (
            rect.top >= 0 &&
            rect.left >= 0 &&
            rect.bottom <=
              (window.innerHeight || document.documentElement.clientHeight) &&
            rect.right <=
              (window.innerWidth || document.documentElement.clientWidth)
          );
        }

        /**
         * Verifica visibilidade e inicia animações se necessário
         */
        function checkVisibility() {
          const container = $(".resumo-container")[0];
          if (
            container &&
            isElementInViewport(container) &&
            !$(container).hasClass("animated")
          ) {
            $(container).addClass("animated");
            startAnimations();
          }
        }

        // =====================================
        // EVENT LISTENERS
        // =====================================
        $(window).on("scroll resize", checkVisibility);

        // Easing personalizado para animações suaves
        $.easing.easeOutCubic = function (x) {
          return 1 - Math.pow(1 - x, 3);
        };

        // =====================================
        // INICIALIZAÇÃO
        // =====================================
        initResumoGeral();
        checkVisibility();

        // =====================================
        // API PÚBLICA PARA INTEGRAÇÃO
        // =====================================

        /**
         * Atualiza dados do componente externamente
         * @param {Object} novosDados - Novos dados no formato config.dados
         */
        window.atualizarResumoGeral = function (novosDados) {
          config.dados = $.extend(true, config.dados, novosDados);
          initResumoGeral();
        };

        /**
         * Força atualização das animações
         */
        window.reanimarResumoGeral = function () {
          $(".fade-in-up").removeClass("animate");
          $(".kpi-value")
            .addClass("loading loading-pulse")
            .removeClass("animated");
          setTimeout(startAnimations, 100);
        };
      });
    </script>
  </body>
</html>
